@model NoSQL_Project.ViewModels.TicketViewModel;
@{
    ViewData["Title"] = "AddTicket";
    EmployeeDetails? details = (EmployeeDetails?)ViewData["EmployeeDetails"];
}
<div class="form-page-header">
    <div class="container">
        <h1 class="display-5 fw-bold">
            <i class="fas me-3"></i>Create A Ticket
        </h1>
        <p class="lead mb-0">Let us know what's bugging you</p>
    </div>
</div>

<div class="container">
    <div class="form-container">
        <!-- Error Alert -->
        @if (ViewBag.ErrorMessage != null)
        {
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-triangle me-2"></i>@ViewBag.ErrorMessage
            </div>
        }

        <form action="/MyTickets/AddTicket" method="post">

            <input type="hidden" asp-for="Ticket.CreatedBy.EmployeeId" value="@details?.EmployeeId" />
            <input type="hidden" asp-for="Ticket.CreatedBy.FirstName" value="@details?.FirstName" />
            <input type="hidden" asp-for="Ticket.CreatedAt" value="@DateTime.Now.ToString("yyyy-MM-ddTHH:mm:ss")" />
            <input type="hidden" asp-for="Ticket.Status" value="@NoSQL_Project.Enums.TicketStatus.open" />

            <!-- Ticket form -->
            <div class="form-section">
                <h3 class="form-section-title">
                    <i class="fas "></i>We're here for you
                </h3>

                <div class="row-lg-6 mb-5">
                    <div class="form-group">
                        <label asp-for="Ticket.Title" class="form-label">
                            <i class="fas fa-signature me-2"></i>Subject
                        </label>
                        <input asp-for="Ticket.Title" class="form-control" required
                               placeholder="Enter the subject" />
                        <span asp-validation-for="Ticket.Title" class="text-danger"></span>
                    </div>
                    <div class="form-group-enhanced">
                        <label asp-for="Ticket.Description" class="form-label">
                            <i class="fas fa-signature me-2"></i>Description
                        </label>
                        <input asp-for="Ticket.Description" class="form-control" required
                               placeholder="What's bugging you?" />
                        <span asp-validation-for="Ticket.Description" class="text-danger h-100"></span>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group-enhanced">
                        <label asp-for="Ticket.TypeOfIncident" class="form-label">
                            <i class="fas me-2"></i>Incident Type
                        </label>
                        <select asp-for="Ticket.TypeOfIncident" asp-items="Model.TypeOfIncidentOptions"
                                class="form-control form-control-select">
                            <option value="">What type of incident is it?</option>
                        </select>
                        <span asp-validation-for="Ticket.TypeOfIncident" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Send</button>
        </form>
        </<div></div>
    </div>
</div>